<!doctype html><html data-reactroot=""><head><meta charSet="utf-8"/><title>React DnD</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/><base target="_blank"/></head><body><div><header class="Header"><div class="NavBar"><div class="NavBar-container"><div class="NavBar-logo"><a href="./" target="_self" class="NavBar-logoTitle">React <i>DnD</i></a><p class="NavBar-logoDescription">Drag and Drop for React</p></div><div class="NavBar-item"><a class="NavBar-link" href="docs-overview.html" target="_self">Docs</a><a class="NavBar-link" href="examples-chessboard-tutorial-app.html" target="_self">Examples</a><a class="NavBar-link" href="https://github.com/react-dnd/react-dnd">GitHub</a></div></div></div></header><div class="PageBody PageBody--hasSidebar"><div class="PageBody-container"><div class="SideBar"><div class="SideBar-content"><div class="SideBar-group"><h4 class="SideBar-groupTitle">Quick Start</h4><a href="docs-overview.html" target="_self" class="SideBar-item SideBar-item--selected"><span class="SideBar-itemText">Overview</span><span class="arrowBullet"></span></a><a href="docs-tutorial.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">Tutorial</span><span class="arrowBullet"></span></a><a href="docs-testing.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">Testing</span><span class="arrowBullet"></span></a><a href="docs-faq.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">FAQ</span><span class="arrowBullet"></span></a><a href="docs-troubleshooting.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">Troubleshooting</span><span class="arrowBullet"></span></a></div><div class="SideBar-group"><h4 class="SideBar-groupTitle">Top-Level API</h4><a href="docs-drag-source.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragSource</span><span class="arrowBullet"></span></a><a href="docs-drop-target.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DropTarget</span><span class="arrowBullet"></span></a><a href="docs-drag-layer.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragLayer</span><span class="arrowBullet"></span></a><a href="docs-drag-drop-context.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragDropContext</span><span class="arrowBullet"></span></a><a href="docs-drag-drop-context-provider.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragDropContextProvider</span><span class="arrowBullet"></span></a></div><div class="SideBar-group"><h4 class="SideBar-groupTitle">Connecting to DOM</h4><a href="docs-drag-source-connector.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragSourceConnector</span><span class="arrowBullet"></span></a><a href="docs-drop-target-connector.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DropTargetConnector</span><span class="arrowBullet"></span></a></div><div class="SideBar-group"><h4 class="SideBar-groupTitle">Monitoring State</h4><a href="docs-drag-source-monitor.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragSourceMonitor</span><span class="arrowBullet"></span></a><a href="docs-drop-target-monitor.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DropTargetMonitor</span><span class="arrowBullet"></span></a><a href="docs-drag-layer-monitor.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">DragLayerMonitor</span><span class="arrowBullet"></span></a></div><div class="SideBar-group"><h4 class="SideBar-groupTitle">Backends</h4><a href="docs-html5-backend.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">HTML5</span><span class="arrowBullet"></span></a><a href="docs-test-backend.html" target="_self" class="SideBar-item"><span class="SideBar-itemText">Test</span><span class="arrowBullet"></span></a></div></div></div><div style="width:100%"><div style="width:100%"><h1>Overview（概要）<a id="overview-">&nbsp;</a></h1><p>React DnD is unlike most of the drag and drop libraries out there, and it can be intimidating if you&#39;ve never used it before. However, once you get a taste of a few concepts at the heart of its design, it starts to make sense. I suggest you read about these concepts before the rest of the docs.</p>
<p>React DnD 与其他的诸多拖放（Drag/Drop）工具库不同，如果你从未使用过它你可能会觉得这玩意太高深莫测了。但是，一旦你了解到它到部分核心设计思想，它就会变得容易理解。我建议你再阅读文档的其他内容之前，先阅读这一部分概要。</p>
<p>Some of these concepts resemble the <a href="http://facebook.github.io/flux/">Flux</a> and <a href="https://github.com/reactjs/react-redux">Redux</a> architectures.<br/>This is not a coincidence, as React DnD uses Redux internally.</p>
<p>（React DnD的）一些设计思想与 <a href="http://facebook.github.io/flux/">Flux</a> and <a href="https://github.com/reactjs/react-redux">Redux</a> 体系相似.<br/>这不是一个巧合, React Dnd 内部就使用了redux.</p>
<h3>Backends（背景）<a id="backends-">&nbsp;</a></h3><p>React DnD is built on top of the <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_and_drop">HTML5 drag and drop API</a>. It is a reasonable default because it screenshots the dragged DOM node and uses it as a “drag preview” out of the box. It&#39;s handy that you don&#39;t have to do any drawing as the cursor moves. This API is also the only way to handle the file drop events.</p>
<p>React DnD 是建立在 <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_and_drop">HTML5 drag and drop API</a>的基础之上的. 这是一个很棒的API，它捕捉了被拖拽的DOM节点的快照，并将其作为一个被拖动的预览浮层. 这种设计使你不需要重复渲染一个一模一样的元素并且让它跟着你的鼠标跑. 这个API也是处理文件拖放事件的唯一方式.</p>
<p>Unfortunately, the HTML5 drag and drop API also has some downsides. It does not work on touch screens, and it provides less customization opportunities on IE than in other browsers.</p>
<p>不幸的事, HTML5 drag and drop API 也有一些缺点. 它不能在触摸屏上使用, 而且它再IE浏览器上提供比其它浏览器更少的定制化特性.</p>
<p>This is why <strong>the HTML5 drag and drop support is implemented in a pluggable way</strong> in React DnD. You don&#39;t have to use it. You can write a different implementation, based on touch events, mouse events, or something else entirely. Such pluggable implementations are called the <em>backends</em> in React DnD. Only the <a href="docs-html5-backend.html">HTML5 backend</a> comes with the library, but more may be added in the future.</p>
<p>这就是为什么 <strong>HTML5 drag and drop 的支持被以插件的形式集成</strong> 在 React DnD 中. 你并不是必须使用这个插件. 你完全可以自己写一个不同的实现, 基于触摸事件, 鼠标事件, 或者其它完全不同的东西. 这个插件在 React DnD 中被称为 <em>backends</em>. 目前只有 <a href="docs-html5-backend.html">HTML5 backend</a> 被打包在 React DnD 中, 将来可能会添加更多.</p>
<p>The backends perform a similar role to that of React&#39;s synthetic event system: <strong>they abstract away the browser differences and process the native DOM events.</strong> Despite the similarities, React DnD backends do not have a dependency on React or its synthetic event system. Under the hood, all the backends do is translate the DOM events into the internal Redux actions that React DnD can process.</p>
<p>这个backends的表现和 React 的模拟事件系统相似: <strong>它通过抽象，抹平了浏览器的差别，并代替你处理原生DOM事件.</strong> 除了这些相同点, React DnD backends 并不依赖React以及它的模拟事件系统. 在底层, 所有的 backends 只是把原生DOM事件处理为 React DnD 可以处理的内部Redux Action.</p>
<h3>Items and Types（拖拽单元和类型） -- 不好翻译，后文均使用Item。<a id="items-and-types-item-">&nbsp;</a></h3><p>Like Flux (or Redux), React DnD uses data, and not the views, as the source of truth. When you drag something across the screen, we don&#39;t say that a component, or a DOM node is being dragged. Instead, we say that an <em>item</em> of a certain <em>type</em> is being dragged.</p>
<p>就像 Flux (or Redux)一样, React DnD 操作数据, 而不是直接操作视图. 当你将什么东西在屏幕上拖动, 我们并不是说有一个组件或者DOM节点正在被拖动. 而是, 一个特定<em>type（类型）</em>的<em>item</em> 正在被拖动.</p>
<p>What is an item? An <em>item</em> is a plain JavaScript object <em>describing</em> what&#39;s being dragged. For example, in a Kanban board application, when you drag a card, an item might look like <code>{ cardId: 42 }</code>. In a Chess game, when you pick up a piece, the item might look like <code>{ fromCell: &#39;C5&#39;, piece: &#39;queen&#39; }</code>. <strong>Describing the dragged data as a plain object helps you keep the components decoupled and unaware of each other.</strong></p>
<p>什么是 item? 一个 <em>item</em> 是一个简单的JS对象 <em>描述</em> 什么东西正在被拖动. 例如, 在一个看板应用（Kanban board Application）中, 当你拖拽一个卡片, 它所对应的 item 看起来像 <code>{ cardId: 42 }</code>. 在象棋游戏中, 当你拿起一粒棋子, 它所对应的 item 大概就是 <code>{ fromCell: &#39;C5&#39;, piece: &#39;queen&#39; }</code>. <strong>用一个简单JS对象描述正在被拖动的数据，可以让你的组件与其它组件相互解耦，并且无需关心彼此。</strong></p>
<p>What is a type, then? A <em>type</em> is a string (or a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol">symbol</a>) uniquely identifying <em>a whole class of items</em> in your application. In a Kanban board app, you might have a <code>&#39;card&#39;</code> type representing the draggable cards and a <code>&#39;list&#39;</code> type for the draggable lists of those cards. In Chess, you might only have a single <code>&#39;piece&#39;</code> type.</p>
<p>那么，什么是 type（类型）? 一个 <em>type</em> 是一个字符串 (或者是一个 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol">symbol</a>) 在你的应用中，特定地表示 <em>一系列（同种类型）的items</em> . 在一个看板APP中, 你可能需要一个 <code>&#39;card&#39;</code> 类型代表可以被拖拽的卡片， 以及一个 <code>&#39;list&#39;</code> 类型表示可以被拖拽的卡片列表. 在象棋中, 你可能只需要一个 <code>&#39;piece&#39;</code> 类型，因为可以拖拽的只有棋子这一种东西.</p>
<p>Types are useful because, as your app grows, you might want to make more things draggable, but you don&#39;t necessarily want all the existing drop targets to suddenly start reacting to the new items. <strong>The types let you specify which drag sources and drop targets are compatible.</strong> You&#39;re probably going to have an enumeration of the type constants in your application, just like you may have an enumeration of the Redux action types.</p>
<h3>Monitors<a id="monitors">&nbsp;</a></h3><p>Drag and drop is inherently stateful. Either a drag operation is in progress, or it isn&#39;t. Either there is a current type and a current item, or there isn&#39;t. This state has to live somewhere.</p>
<p>React DnD exposes this state to your components via a few tiny wrappers over the internal state storage called the <em>monitors</em>. <strong>The monitors let you update the props of your components in response to the drag and drop state changes.</strong></p>
<p>For each component that needs to track the drag and drop state, you can define a <em>collecting function</em> that retrieves the relevant bits of it from the monitors. React DnD then takes care of timely calling your collecting function and merging its return value into your components&#39; props.</p>
<p>Let&#39;s say you want to highlight the Chess cells when a piece is being dragged. A collecting function for the <code>Cell</code> component might look like this:</p>
<code class="codeBlock"><span class="token block-keyword" >function</span> <span class="token function" >collect<span class="token punctuation" >(</span></span>monitor<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    highlighted<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >canDrop<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    hovered<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >isOver<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p>It instructs React DnD to pass the up-to-date values of <code>highlighted</code> and <code>hovered</code> to all the <code>Cell</code> instances as props.</p>
<h3>Connectors<a id="connectors">&nbsp;</a></h3><p>If the backend handles the DOM events, but the components use React to describe the DOM, how does the backend know which DOM nodes to listen to? Enter the <em>connectors</em>. <strong>The connectors let you assign one of the predefined roles (a drag source, a drag preview, or a drop target) to the DOM nodes</strong> in your <code>render</code> function.</p>
<p>In fact, a connector is passed as the first argument to the <em>collecting function</em> we described above. Let&#39;s see how we can use it to specify the drop target:</p>
<code class="codeBlock"><span class="token block-keyword" >function</span> <span class="token function" >collect<span class="token punctuation" >(</span></span>connect<span class="token punctuation" >,</span> monitor<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    highlighted<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >canDrop<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    hovered<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >isOver<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    connectDropTarget<span class="token punctuation" >:</span> connect<span class="token punctuation" >.</span><span class="token function" >dropTarget<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p>In the component&#39;s <code>render</code> method, we are then able to access both the data obtained from the monitor, and the function obtained from the connector:</p>
</div><div class="CodeBlock"><ul class="CodeBlock-tabs"><li class="CodeBlock-tab CodeBlock-activeTab"><a>ES6</a></li><li class="CodeBlock-tab "><a>ES5</a></li></ul><div class="CodeBlock-content"><div style="width:100%"><div style="width:100%">
<code class="codeBlock"><span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> <span class="token punctuation" >{</span> highlighted<span class="token punctuation" >,</span> hovered<span class="token punctuation" >,</span> connectDropTarget <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token function" >connectDropTarget<span class="token punctuation" >(</span></span>
    <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token function" >classSet<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      <span class="token string" >'Cell'</span><span class="token punctuation" >:</span> <span class="token primitive" >true</span><span class="token punctuation" >,</span>
      <span class="token string" >'Cell--highlighted'</span><span class="token punctuation" >:</span> highlighted<span class="token punctuation" >,</span>
      <span class="token string" >'Cell--hovered'</span><span class="token punctuation" >:</span> hovered
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >></span>
      <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>children<span class="token punctuation" >}</span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%">
<p>The <code>connectDropTarget</code> call tells React DnD that the root DOM node of our component is a valid drop target, and that its hover and drop events should be handled by the backend. Internally it works by attaching a <a href="https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute">callback ref</a> to the React element you gave it. The function returned by the connector is memoized, so it doesn&#39;t break the <code>shouldComponentUpdate</code> optimizations.</p>
<h3>Drag Sources and Drop Targets<a id="drag-sources-and-drop-targets">&nbsp;</a></h3><p>So far we have covered the backends which work with the DOM, the data, as represented by the items and types, and the collecting functions that, thanks to the monitors and the connectors, let you describe what props React DnD should inject into your components.</p>
<p>But how do we configure our components to actually have those props injected? How do we perform the side effects in response to the drag and drop events? Meet the <em>drag sources</em> and the <em>drop targets</em>, the primary abstraction units of React DnD. <strong>They really tie the types, the items, the side effects, and the collecting functions together with your components.</strong></p>
<p>Whenever you want to make a component or some part of it draggable, you need to wrap that component into a <em>drag source</em> declaration. Every drag source is registered for a certain <em>type</em>, and has to implement a method producing an <em>item</em> from the component&#39;s props. It can also optionally specify a few other methods for handling the drag and drop events. The drag source declaration also lets you specify the <em>collecting function</em> for the given component.</p>
<p>The <em>drop targets</em> are very similar to the drag sources. The only difference is that a single drop target may register for several item types at once, and instead of producing an item, it may handle its hover or drop.</p>
<h3>Higher-Order Components and ES7 decorators<a id="higher-order-components-and-es7-decorators">&nbsp;</a></h3><p>How do you wrap your components? What does wrapping even mean? If you have not worked with higher-order components before, go ahead and read <a href="https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750">this article</a>, as it explains the concept in detail.</p>
<p><strong>A higher-order component is just a function that takes a React component class, and returns another React component class.</strong> The wrapping component provided by the library renders <em>your</em> component in its <code>render</code> method and forwards the props to it, but also adds some useful behavior.</p>
<p>In React DnD, <a href="docs-drag-source.html"><code>DragSource</code></a> and <a href="docs-drop-target.html"><code>DropTarget</code></a>, as well as a few other top-level exported functions, are in fact higher-order components. They breathe the drag and drop magic into your components.</p>
<p>One caveat of using them is that they require <em>two</em> function applications. For example, here&#39;s how to wrap <code>YourComponent</code> in a <a href="docs-drag-source.html"><code>DragSource</code></a>:</p>
</div><div class="CodeBlock"><ul class="CodeBlock-tabs"><li class="CodeBlock-tab CodeBlock-activeTab"><a>ES6</a></li><li class="CodeBlock-tab "><a>ES5</a></li></ul><div class="CodeBlock-content"><div style="width:100%"><div style="width:100%">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Source</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

<span class="token keyword" >class</span> <span class="token class-name" >YourComponent</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">/* ... */</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >DragSource<span class="token punctuation" >(</span></span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span><span class="token qualifier" >Your</span><span class="token qualifier" >Component</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></div></div></div></div><div style="width:100%">
<p>Notice how, after specifying the <a href="docs-drag-source.html"><code>DragSource</code></a> parameters in the first function call, there is a <em>second</em> function call, where you finally pass your class. This is called <a href="http://en.wikipedia.org/wiki/Currying">currying</a>, or <a href="http://en.wikipedia.org/wiki/Partial_application">partial application</a>, and is necessary for the <a href="http://github.com/wycats/javascript-decorators">ES7 decorator syntax</a> to work out of the box:</p>
</div><div class="CodeBlock"><ul class="CodeBlock-tabs"><li class="CodeBlock-tab CodeBlock-activeTab"><a>ES7</a></li></ul><div class="CodeBlock-content"><div style="width:100%"><div style="width:100%">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Source</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

@<span class="token function" >DragSource<span class="token punctuation" >(</span></span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >YourComponent</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">/* ... */</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%">
<p>You don&#39;t have to use this syntax, but if you like it, you can enable it by transpiling your code with <a href="http://babeljs.io">Babel</a>, and putting <code>{ &quot;stage&quot;: 1 }</code> into your <a href="https://babeljs.io/docs/usage/babelrc/">.babelrc file</a>.</p>
<p>Even if you don&#39;t plan to use ES7, the partial application can still be handy, because you can combine several <a href="docs-drag-source.html"><code>DragSource</code></a> and <a href="docs-drop-target.html"><code>DropTarget</code></a> declarations in ES5 or ES6 using a functional composition helper such as <a href="https://lodash.com/docs#flow"><code>_.flow</code></a>. In ES7, you can just stack the decorators to achieve the same effect.</p>
</div><div class="CodeBlock"><ul class="CodeBlock-tabs"><li class="CodeBlock-tab CodeBlock-activeTab"><a>ES7</a></li><li class="CodeBlock-tab "><a>ES6</a></li><li class="CodeBlock-tab "><a>ES5</a></li></ul><div class="CodeBlock-content"><div style="width:100%"><div style="width:100%">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Source</span><span class="token punctuation" >,</span> <span class="token qualifier" >Drop</span><span class="token qualifier" >Target</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

@<span class="token function" >DragSource<span class="token punctuation" >(</span></span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation" >)</span>
@<span class="token function" >DropTarget<span class="token punctuation" >(</span></span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >YourComponent</span> <span class="token punctuation" >{</span>
  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> connectDragSource<span class="token punctuation" >,</span> connectDropTarget <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>props
    <span class="token keyword" >return</span> <span class="token function" >connectDragSource<span class="token punctuation" >(</span></span><span class="token function" >connectDropTarget<span class="token punctuation" >(</span></span>
      <span class="token comment" spellcheck="true">/* ... */</span>
    <span class="token punctuation" >)</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%">
<h3>Putting It All Together<a id="putting-it-all-together">&nbsp;</a></h3><p>Below is an example of wrapping an existing <code>Card</code> component into a drag source.</p>
</div><div class="CodeBlock"><ul class="CodeBlock-tabs"><li class="CodeBlock-tab CodeBlock-activeTab"><a>ES7</a></li><li class="CodeBlock-tab "><a>ES6</a></li><li class="CodeBlock-tab "><a>ES5</a></li></ul><div class="CodeBlock-content"><div style="width:100%"><div style="width:100%">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Source</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// Drag sources and drop targets only interact
</span><span class="token comment" spellcheck="true">// if they have the same string type.
</span><span class="token comment" spellcheck="true">// You want to keep types in a separate file with
</span><span class="token comment" spellcheck="true">// the rest of your app's constants.
</span><span class="token keyword" >const</span> <span class="token qualifier" >Types</span> <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  CARD<span class="token punctuation" >:</span> <span class="token string" >'card'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">/**
 * Specifies the drag source contract.
 * Only `beginDrag` function is required.
 */</span>
<span class="token keyword" >const</span> cardSource <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token function" >beginDrag<span class="token punctuation" >(</span></span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Return the data describing the dragged item
</span>    <span class="token keyword" >const</span> item <span class="token operator" >=</span> <span class="token punctuation" >{</span> id<span class="token punctuation" >:</span> props<span class="token punctuation" >.</span>id <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    <span class="token keyword" >return</span> item<span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  <span class="token function" >endDrag<span class="token punctuation" >(</span></span>props<span class="token punctuation" >,</span> monitor<span class="token punctuation" >,</span> component<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token block-keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>monitor<span class="token punctuation" >.</span><span class="token function" >didDrop<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token comment" spellcheck="true">// When dropped on a compatible target, do something
</span>    <span class="token keyword" >const</span> item <span class="token operator" >=</span> monitor<span class="token punctuation" >.</span><span class="token function" >getItem<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token keyword" >const</span> dropResult <span class="token operator" >=</span> monitor<span class="token punctuation" >.</span><span class="token function" >getDropResult<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token qualifier" >Card</span><span class="token qualifier" >Actions</span><span class="token punctuation" >.</span><span class="token function" >moveCardToList<span class="token punctuation" >(</span></span>item<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span> dropResult<span class="token punctuation" >.</span>listId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// Use the decorator syntax
</span>@<span class="token function" >DragSource<span class="token punctuation" >(</span></span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>CARD<span class="token punctuation" >,</span> cardSource<span class="token punctuation" >,</span> <span class="token punctuation" >(</span>connect<span class="token punctuation" >,</span> monitor<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Call this function inside render()
</span>  <span class="token comment" spellcheck="true">// to let React DnD handle the drag events:
</span>  connectDragSource<span class="token punctuation" >:</span> connect<span class="token punctuation" >.</span><span class="token function" >dragSource<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token comment" spellcheck="true">// You can ask the monitor about the current drag state:
</span>  isDragging<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >isDragging<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Card</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Your component receives its own props as usual
</span>    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> id <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true">// These two props are injected by React DnD,
</span>    <span class="token comment" spellcheck="true">// as defined by your `collect` function above:
</span>    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> isDragging<span class="token punctuation" >,</span> connectDragSource <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token function" >connectDragSource<span class="token punctuation" >(</span></span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        I am a draggable card number <span class="token punctuation" >{</span>id<span class="token punctuation" >}</span>
        <span class="token punctuation" >{</span>isDragging <span class="token operator" >&amp;&amp;</span> <span class="token string" >' (and I am being dragged now)'</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%">
<p>Now you know enough about React DnD to explore the rest of the documentation!<br/>The <a href="docs-tutorial.html">tutorial</a> is a great place to start.</p>
</div></div></div></div></div><script>window.INITIAL_PROPS = {"location":"docs-overview.html","devMode":false,"files":{"main.js":"main-e90e3c24525569a50d03.js"}};
</script><script src="main-e90e3c24525569a50d03.js"></script></body></html>